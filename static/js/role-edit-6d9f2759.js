import{_ as P,X as I,r as d,b as _,e as A,k as C,i as n,f as l,w as f,g as h,aZ as k,p as x,q as b}from"./index-2290b500.js";import{A as g}from"./admin-9eccbf1c.js";import y from"./group-permission-33ca78b4.js";const E={components:{GroupPermissions:y},props:["groupId"],setup(i,a){I();const s=d([]),e=d([]),t=d([]);return{back:()=>{a.emit("finish")},permissions:s,confirmEdit:async()=>{const o=parseInt(i.groupId,10);if(s.value.sort().toString()!==t.value.sort().toString()){const m=t.value.concat(s.value).filter(r=>!s.value.includes(r)),u=t.value.concat(s.value).filter(r=>!t.value.includes(r));u.length>0&&await g.dispatchPermissions(o,u),m.length>0&&await g.removePermissions(o,m),a.emit("finish"),k.success("权限修改成功")}},allPermissions:e,getCacheAuthIds:o=>{t.value=o},cachePermissions:t,updatePermissions:o=>{s.value=o},updateAllPermissions:o=>{e.value=o}}}},w=i=>(x("data-v-a379f405"),i=i(),b(),i),S={class:"container"},U=w(()=>n("div",{class:"title"},"编辑分组权限",-1)),B={class:"content"},G={class:"content"},N={style:{"padding-left":"5px","margin-top":"30px"}};function V(i,a,s,e,t,v){const p=_("group-permissions"),c=_("el-button");return A(),C("div",S,[U,n("div",B,[n("div",G,[l(p,{id:s.groupId,ref:"groupPermissions",onUpdatePermissions:e.updatePermissions,onGetCacheAuthIds:e.getCacheAuthIds,onUpdateAllPermissions:e.updateAllPermissions,style:{"margin-right":"-30px","margin-left":"-25px","margin-bottom":"-10px"}},null,8,["id","onUpdatePermissions","onGetCacheAuthIds","onUpdateAllPermissions"])]),n("div",N,[l(c,{type:"primary",onClick:e.confirmEdit},{default:f(()=>[h("确 定")]),_:1},8,["onClick"]),l(c,{onClick:e.back},{default:f(()=>[h("返回")]),_:1},8,["onClick"])])])])}const Z=P(E,[["render",V],["__scopeId","data-v-a379f405"]]);export{Z as default};
